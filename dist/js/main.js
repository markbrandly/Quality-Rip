!function(){function t(t){t.parentNode.removeChild(t)}function e(t){var e=document.cookie.split(t+"=");return 2==e.length?e.pop().split(";").shift():!1}function o(t){document.cookie=encodeURIComponent(t)+"=deleted; expires="+new Date(0).toUTCString()}function n(t,o){e(t)?o():setTimeout(function(){n(t,o)},1e3)}var r=function(){for(var t="",e="0123456789abcdef",o=0;16>o;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},i=angular.module("yt-dl",["ngAnimate"]);i.controller("ctrl",["$scope","$http","$sce",function(e,i,a){e.trustSrc=function(t){return a.trustAsResourceUrl(t)},e.download=function(e){var i=document.createElement("iframe"),a=r();i.setAttribute("class","hidden"),i.setAttribute("src","download?id="+e+"&token="+a),console.log(i),document.body.appendChild(i),n(a,function(){alert("ready to download"),o(a),t(i)})},e.resetData=function(){e.vidData=null},e.findVideo=function(){var t=e.search;e.loadVideo(t)},e.loadVideo=function(t){e.loading=!0;var o={method:"GET",url:"http://localhost:3000/videoJson?url="+t,headers:{}};i(o).success(function(t){e.loading=!1,e.vidData=t,t.webpage_url&&(e.search=t.webpage_url),console.log(JSON.stringify(t,null,2))})}}])}();