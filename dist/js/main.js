!function(){function t(t){t.parentNode.removeChild(t)}function o(t){var o=document.cookie.split(t+"=");return 2==o.length?o.pop().split(";").shift():!1}function n(t){document.cookie=encodeURIComponent(t)+"=deleted; expires="+new Date(0).toUTCString()}function e(t,n){o(t)?n():setTimeout(function(){e(t,n)},1e3)}var i=function(){for(var t="",o="0123456789abcdef",n=0;16>n;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t},r=angular.module("yt-dl",["ngAnimate"]);r.controller("ctrl",["$scope","$http","$sce",function(o,r,c){o.trustSrc=function(t){return c.trustAsResourceUrl(t)},o.download=function(o){var r=document.createElement("iframe"),c=i();r.setAttribute("class","hidden"),r.setAttribute("src","download?id="+o+"&token="+c),console.log(r),document.body.appendChild(r),e(c,function(){alert("ready to download"),n(c),t(r)})},o.resetData=function(){o.vidData=null},o.findVideo=function(){var t=o.search;o.loadVideo(t)},o.loadVideo=function(t){o.loading=!0;var n={method:"GET",url:"http://localhost:3000/videoJson?url="+t,headers:{}};r(n).success(function(t){o.loading=!1,o.vidData=t,console.log(JSON.stringify(t,null,2))})}}])}();